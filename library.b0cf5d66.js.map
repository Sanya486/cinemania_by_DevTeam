{"mappings":"gfAEAA,EAAA,S,mGCFA,IAAAC,EAAAD,EAAA,SAEME,EAAiBC,SAASC,cAAc,sBACxCC,EAAkBF,SAASC,cAAc,4BACzCE,EAAcH,SAASC,cAAc,gBAGrCG,EAAgBC,KAAKC,MAAMC,aAAaC,QADzB,oBACmD,GAGpEC,EAAO,EAeX,SAASC,IAGP,GAFAC,QAAQC,IAAI,iBAAkBR,GAED,IAAzBA,EAAcS,OAAc,CAM9Bd,EAAee,UALO,qT,KAMjB,CACL,IAAMC,EAAiBX,EACpBY,MA5BS,GA4BFP,EAAO,GA5BL,EA4BmBA,GAC5BQ,KAAI,SAAAC,G,OAAM,EAAApB,EAAAqB,YAAWD,E,IAExBE,QAAQC,IAAIN,GACTO,MAAK,SAAAC,GACJ,IAAMC,EAAgBD,EAAUE,KAAK,IACrCvB,EAAgBY,WAAaU,EA1B5BpB,EAAcS,OARP,EAQ0BJ,EA6BhCN,EAAYuB,MAAMC,QAAU,QAE5BxB,EAAYuB,MAAMC,QAAU,M,IAG/BC,OAAM,SAAAC,GACLlB,QAAQkB,MAAM,8BAA+BA,E,KAtCrDnB,IAMAP,EAAY2B,iBAAiB,SAAS,WACpCrB,GAAQ,EACRC,G","sources":["src/js/index-library.js","src/js/other/library-favorites-cards.js"],"sourcesContent":["// =============Fetches-JS =============\n\nimport \"./fetches/fetch-upcoming\";\nimport \"./fetches/fetch-movie-details\";\nimport \"./fetches/fetch-movie-genre\";\nimport \"./fetches/fetch-trailer\";\nimport \"./fetches/fetch-search\";\nimport \"./fetches/fetch-trendings\";\n\n// =============Modals-JS =============\n\nimport \"./modals/modal-team\"\nimport \"./modals/slider-modal-team\"\n\n// =============Other-JS =============\n\n// import \"./other/card-markup\"\nimport \"./other/switch-theme-btn\"\nimport \"./other/mob-menu\"\nimport \"./other/library-favorites-cards\"\nimport \"./other/slide-menu\"\nimport \"./other/current-page-track\"\nimport \"./other/scroll-up\"\n// import \"./other/test-card-markup\"\n","import { cardMarkup } from './card-markup';\n\nconst sectionLibrary = document.querySelector('.library-film-list');\nconst libraryCardList = document.querySelector('.card-list-search-result');\nconst loadMoreBtn = document.querySelector('#js-loadmore');\n\nconst librariesKey = 'films-id-array';\nconst moviesLocalId = JSON.parse(localStorage.getItem(librariesKey)) || [];\n\nconst perPage = 9;\nlet page = 1;\n\n// localStorage.clear();\n\nrenderCards();\n\nfunction showMoreCards() {\n  return moviesLocalId.length > perPage * page;\n}\n\nloadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  renderCards();\n});\n\nfunction renderCards() {\n  console.log('moviesLocalId ', moviesLocalId);\n\n  if (moviesLocalId.length === 0) {\n    const emptyLibrary = `<div class=\"container-library container\">\n      <p class=\"library-empty__mistake\">OOPS...<br>We are very sorry!<br>\n      You donâ€™t have any movies at your library.</p>\n      <button class=\"main-accent-sml-btn btn library\" onclick=\"window.location.href='catalog.html'\">Search movie</button>\n    </div>`;\n    sectionLibrary.innerHTML = emptyLibrary;\n  } else {\n    const renderPromises = moviesLocalId\n      .slice((page - 1) * perPage, page * perPage)\n      .map(id => cardMarkup(id));\n\n    Promise.all(renderPromises)\n      .then(filmCards => {\n        const filmCardsHTML = filmCards.join('');\n        libraryCardList.innerHTML += filmCardsHTML;\n\n        if (showMoreCards()) {\n          loadMoreBtn.style.display = 'block';\n        } else {\n          loadMoreBtn.style.display = 'none';\n        }\n      })\n      .catch(error => {\n        console.error('Error rendering film cards:', error);\n      });\n  }\n}\n"],"names":["parcelRequire","$5T9lI","$575491aee910a457$var$sectionLibrary","document","querySelector","$575491aee910a457$var$libraryCardList","$575491aee910a457$var$loadMoreBtn","$575491aee910a457$var$moviesLocalId","JSON","parse","localStorage","getItem","$575491aee910a457$var$page","$575491aee910a457$var$renderCards","console","log","length","innerHTML","renderPromises","slice","map","id","cardMarkup","Promise","all","then","filmCards","filmCardsHTML","join","style","display","catch","error","addEventListener"],"version":3,"file":"library.b0cf5d66.js.map"}