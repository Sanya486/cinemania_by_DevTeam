var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},l=e.parcelRequired7c6;null==l&&((l=function(e){if(e in t)return t[e].exports;if(e in r){var l=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,l.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequired7c6=l),l("kQlMt"),l("e9oz9"),l("6SEeX"),l("aDtKJ"),l("4Q23v"),l("fgOKF"),l("lbZk7"),l("hy2MT"),l("5WXxt"),l("jqxwP");var n=l("iQIUW"),i=l("8nneY"),o=l("aDtKJ"),a=l("e9oz9");const s={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex")},c=document.querySelector(".library-film-list"),d=document.querySelector(".card-list-search-result"),m=document.querySelector("#js-loadmore");let u,p,f=[],y=localStorage.getItem("films-id-array");s.closeModalBtn.addEventListener("click",k),window.addEventListener("load",h);let v=1;function h(){if(null===y||0===JSON.parse(y).length)g();else{const e=JSON.parse(y).slice(9*(v-1),9*v).map((e=>(0,i.cardMarkup)(e)));Promise.all(e).then((e=>{const t=e.join("");d.innerHTML+=t,S(),w()})).catch((e=>{console.error("Error rendering film cards:",e)}))}}function b(){if(v=1,y=localStorage.getItem("films-id-array"),null===y||0===JSON.parse(y).length)g();else{const e=JSON.parse(y).map((e=>(0,i.cardMarkup)(e))).slice(9*(v-1),9*v);Promise.all(e).then((e=>{const t=e.join("");d.innerHTML=t,S()})).catch((e=>{console.error("Error rendering film cards:",e)}))}}function g(){c.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>'}function S(){JSON.parse(y).length>9*v?m.style.display="block":m.style.display="none",w()}function w(){let e=document.querySelectorAll(".film-card");for(const t of e)t.addEventListener("click",x)}function x(e){var t;e.preventDefault(),u=+e.currentTarget.id,t=u,s.moreDetail.classList.remove("is-hidden"),async function(e){try{const t=await(0,a.fetchMovieDetails)(e),r=`<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/original/${t.smallPoster}" class="poster-img" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">${t.title}</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li><p class="film-info-params-vote"><span class="film-info-params-vote-number">${t.voteAverage.toFixed(1)}</span> / <span class="film-info-params-vote-number">${t.voteCount}</span></p>\n                </li>\n                <li><p class="popularity">${t.popularity.toFixed(1)}</p></li>\n                <li><p class="genre">${t.genres}</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>About</p>\n            <p>${t.overview}</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller" data-id="${e}">Watch trailer</button>\n            <button class="add-to-my-library-btn btn modal" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>`;s.wrap.innerHTML=r;const l=document.querySelector("#btn-watch-treiller");p=document.querySelector("#btn-add-to-my-library"),l.addEventListener("click",M),p.addEventListener("click",O),JSON.parse(y).includes(u)&&T("Remove from my library"),null===y&&T("Add to my library")}catch(e){console.log(e)}}(t),document.addEventListener("keydown",L),s.body.style.overflow="hidden",s.scrollUpBtn.style.display="none"}function k(){s.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",L),s.body.style.overflow="auto"}function L(e){"Escape"===e.key&&k()}function M(e){const t=+e.target.dataset.id;var r;r=t,s.trailerModal.classList.remove("is-hidden"),async function(e){try{const t=await(0,o.fetchTrailers)(e);if(t.length>0){const e=function(e){return`\n    <iframe width="560" height="315" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n  `}(t[0].key);s.trailerModalContent.innerHTML=`<div class="trailer-modal-content">${e}</div>`}else{const e='\n    <div class="trailer-error-info">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn\'t find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 320px)">\n      <source srcset="../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 768px)">\n      <source srcset="../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x" \n              media="(min-width: 769px)">\n      <img src="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png" alt="Traier is not found">\n    </picture>\n    </div>\n  ';s.trailerModal.innerHTML=`<div class="trailer-modal-content">${e}</div>`}}catch(e){console.error("Error fetching trailer:",e)}}(r),document.addEventListener("keydown",E),s.closeTrailerBtn.addEventListener("click",q)}function E(e){"Escape"===e.key&&q()}function q(){s.trailerModal.classList.add("is-hidden"),s.trailerModalContent.innerHTML="",document.removeEventListener("keydown",E),s.closeModalBtn.removeEventListener("click",q)}function O(){k(),y=localStorage.getItem("films-id-array");try{if(null===y)return f.push(u),localStorage.setItem("films-id-array",JSON.stringify(f)),y=localStorage.getItem("films-id-array"),T("Remove from my library"),void b();let e=JSON.parse(y);if(!e.includes(u))return e.push(u),localStorage.setItem("films-id-array",JSON.stringify(e)),y=localStorage.getItem("films-id-array"),T("Remove from my library"),void b();if(e.includes(u)){const t=e.indexOf(u);e.splice(t,1),localStorage.setItem("films-id-array",JSON.stringify(e)),y=localStorage.getItem("films-id-array"),T("Add to my library"),b()}}catch(e){n.Notify.failure("Please, try one more time")}}function T(e){p.textContent=e}m.addEventListener("click",(()=>{v+=1,h()})),l("fbGf3"),l("97pP7"),l("faktv");
//# sourceMappingURL=library.a1c7971e.js.map
