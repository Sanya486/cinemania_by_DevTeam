var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in r){var i=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,i.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequired7c6=i),i.register("ctBDl",(function(e,t){var r=i("2shzp"),o=i("e9oz9"),n=i("59yTk"),a=i("aDtKJ");const l={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),poster:document.querySelector(".poster-img"),title:document.querySelector(".movie-title"),vote:document.querySelector(".vote"),votes:document.querySelector(".votes"),popularity:document.querySelector(".popularity"),genre:document.querySelector(".genre"),description:document.querySelector(".about p"),closeModalBtn:document.querySelector(".close-trailer-btn"),wrap:document.querySelector(".flex"),body:document.querySelector("body")};let c,s,d,m=[],u=localStorage.getItem("films-id-array");const p=document.body.clientWidth;function f(e){const t=+e.target.dataset.id;var r;r=t,l.trailerModal.classList.remove("is-hidden"),l.body.style.overflow="hidden",async function(e){try{const t=await(0,a.fetchTrailers)(e);if(t.length>0){const e=function(e){return p<=767?`\n      <iframe width="250" height="160" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    `:`\n      <iframe width="600" height="300" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    `}(t[0].key);l.trailerModalContent.innerHTML=e}else E()}catch(e){console.error("Error fetching trailer:",e),E()}}(r),document.addEventListener("keydown",L),l.closeModalBtn.addEventListener("click",w),l.trailerModal.addEventListener("click",h)}function y(e){var t;c=+e.target.dataset.id,t=c,l.moreDetail.classList.remove("is-hidden"),l.body.style.overflow="hidden",async function(e){try{const t=await(0,o.fetchMovieDetails)(e),r=`<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/w400/${t.smallPoster}" class="poster-img" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">${t.title}</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li>\n                  <p class="film-info-params-vote"><span class="film-info-params-vote-number">${t.voteAverage.toFixed(1)}</span> / <span class="film-info-params-vote-number">${t.voteCount}</span></p>\n                </li>\n                <li><p class="popularity">${t.popularity.toFixed(1)}</p></li>\n                <li><p class="genre">${t.genres}</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>ABOUT</p>\n            <p>${t.overview}</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller"\n            data-id="${e}">Watch trailer</button>\n            <button class="add-to-my-library-btn" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>`;l.wrap.innerHTML=r;const i=document.querySelector("#btn-watch-treiller");s=document.querySelector("#btn-add-to-my-library"),i.addEventListener("click",f),s.addEventListener("click",M),JSON.parse(u).includes(c)&&q("Remove from my library"),null===u&&q("Add to my library")}catch(e){console.log(e)}}(t),document.addEventListener("keydown",S),l.moreDetail.addEventListener("click",v);document.querySelector(".modal-film-info .close-modal").addEventListener("click",b)}function v(e){g(e,b)}function h(e){g(e,w)}function g(e,t){e.target===e.currentTarget&&t()}function b(){l.moreDetail.classList.add("is-hidden"),l.body.style.overflow="auto",document.removeEventListener("keydown",S),l.moreDetail.removeEventListener("click",v)}function w(){l.trailerModal.classList.add("is-hidden"),l.body.style.overflow="auto",l.trailerModalContent.innerHTML="",document.removeEventListener("keydown",L),l.closeModalBtn.removeEventListener("click",w),l.trailerModal.removeEventListener("click",h)}function S(e){"Escape"===e.key&&b()}function L(e){"Escape"===e.key&&w()}function E(){trailerErrorImage.classList.remove("is-hidden"),l.trailerModalContent.innerHTML='\n    <div class="error-mode-content">\n      <div class="trailer-error-info">\n        <p>OOPS...</p>\n        <p>We are very sorry!</p>\n        <p>But we couldn\'t find the trailer.</p>\n      </div>\n  '}function M(){u=localStorage.getItem("films-id-array");try{if(null===u)return m.push(c),localStorage.setItem("films-id-array",JSON.stringify(m)),u=localStorage.getItem("films-id-array"),void q("Remove from my library");let e=JSON.parse(u);if(!e.includes(c))return e.push(c),localStorage.setItem("films-id-array",JSON.stringify(e)),u=localStorage.getItem("films-id-array"),void q("Remove from my library");if(e.includes(c)){const t=e.indexOf(c);e.splice(t,1),localStorage.setItem("films-id-array",JSON.stringify(e)),u=localStorage.getItem("films-id-array"),q("Add to my library")}}catch(e){Notify.failure("Please, try one more time")}}function q(e){s.textContent=e}window.addEventListener("load",(async function(){try{const e=await(async()=>(await r.default.get("https://api.themoviedb.org/3/trending/movie/day?api_key=3e1aa277fd6b8a3cd0a3e29dfce20a5c")).data.results.map((e=>e.id)))();await async function(e){try{const t=e[Math.floor(Math.random()*e.length)];d=await(0,o.fetchMovieDetails)(t),function(e){const{title:t,overview:r,smallPoster:i,poster:o,voteAverage:a,id:c}=e,s=Math.round(a),d=(0,n.rateArray)(s).map((e=>`<li class="rating-item">\n               <img class="rating-icon" src="${e}" alt="">\n               </li>`)).join(""),m=`<div class="home-hero-api-movie">\n      <div class="home-hero-api-movie-con"><h2 class="home-hero-api-movie-name">${t}</h2>\n    <div class="home-hero-api-movie-rating">\n      <ul class="film-rating-hero">\n        ${d}\n      </ul>\n    </div>\n    <p class="home-hero-api-movie-description">\n      ${r}\n    </p>\n    <div class="home-hero-api-movie-btns">\n    <button class="main-accent-sml-btn btn" id='btn-watch-trailer' data-id="${c}">Watch trailer</button>\n    <button class="rm-light-bcg-btn btn btn-call-film-info" data-id="${c}">More details </button>\n    </div>\n  </div>\n  <div class="home-hero-api-movie-bg">\n    <img loading="lazy"\n      src="https://image.tmdb.org/t/p/original/${i}"\n      srcset="\n        https://image.tmdb.org/t/p/original/${i}  320w,\n        https://image.tmdb.org/t/p/original/${o}  768w,\n        https://image.tmdb.org/t/p/original/${o} 1280w\n      "\n      sizes="(max-width: 320px) 320px,\n          (max-width: 768px) 380px,\n          1280px"\n      alt="${t}"\n    />\n    </div>\n    </div>`;l.heroContainer.insertAdjacentHTML("beforeend",m),function(){const e=document.querySelector(".preloader");e&&e.remove()}()}(d)}catch(e){throw new Error(e.message)}}(e);document.getElementById("btn-watch-trailer").addEventListener("click",f);document.querySelector(".btn-call-film-info").addEventListener("click",y)}catch(e){throw new Error(e.message)}}))}));
//# sourceMappingURL=index.c42eb3bf.js.map
