var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},e.parcelRequired7c6=n),n("kQlMt"),n("e9oz9"),n("6SEeX"),n("aDtKJ"),n("4Q23v"),n("fgOKF"),n("lbZk7"),n("hy2MT"),n("8lRc6"),n("8tl5M");var o=n("iQIUW"),l=n("imk7a"),i=n("aDtKJ"),a=n("e9oz9");const c={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex"),selectSection:document.querySelector(".genre-filter"),select:document.querySelector(".select"),selectList:document.querySelector(".select-options"),selectStyled:document.querySelector(".select-styled-content"),selectAll:document.querySelector(".select-styled")},s=document.querySelector(".library-film-list"),d=document.querySelector(".card-list-search-result"),u=document.querySelector("#js-loadmore"),m=document.querySelector(".reset-filter-button");let y,f,p,v=[],b=localStorage.getItem("films-id-array");c.closeModalBtn.addEventListener("click",q),window.addEventListener("load",g);let h=1;function g(){if(null===b||0===JSON.parse(b).length)w();else{const e=JSON.parse(b).slice(9*(h-1),9*h).map((e=>(0,l.cardMarkup)(e)));Promise.all(e).then((e=>{const t=e.join("");d.innerHTML+=t,L(),k()})).catch((e=>{console.error("Error rendering film cards:",e)}))}c.select.addEventListener("click",I),m.addEventListener("click",(()=>{document.location.reload()}))}function S(){if(h=1,b=localStorage.getItem("films-id-array"),null===b||0===JSON.parse(b).length)w();else{const e=JSON.parse(b).map((e=>(0,l.cardMarkup)(e))).slice(9*(h-1),9*h);Promise.all(e).then((e=>{const t=e.join("");d.innerHTML=t,L()})).catch((e=>{console.error("Error rendering film cards:",e)}))}c.select.addEventListener("click",I),m.addEventListener("click",(()=>{document.location.reload()}))}function w(){o.Notify.info("OOPS... You don't have any movies at your library.");s.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>',c.selectSection.classList.add("hidden")}function L(){JSON.parse(b).length>9*h?u.style.display="block":u.style.display="none",k()}function k(){let e=document.querySelectorAll(".film-card");for(const t of e)t.addEventListener("click",E)}function E(e){var t;e.preventDefault(),y=+e.currentTarget.id,t=y,c.moreDetail.classList.remove("is-hidden"),async function(e){try{const t=await(0,a.fetchMovieDetails)(e),r=`<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/w400/${t.smallPoster}" class="poster-img" loading="lazy" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">${t.title}</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li><p class="film-info-params-vote"><span class="film-info-params-vote-number">${t.voteAverage.toFixed(1)}</span> / <span class="film-info-params-vote-number">${t.voteCount}</span></p>\n                </li>\n                <li><p class="popularity">${t.popularity.toFixed(1)}</p></li>\n                <li><p class="genre">${t.genres}</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>About</p>\n            <p>${t.overview}</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller" data-id="${e}">Watch trailer</button>\n            <button class="add-to-my-library-btn btn modal" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>`;c.wrap.innerHTML=r;const n=document.querySelector("#btn-watch-treiller");f=document.querySelector("#btn-add-to-my-library"),n.addEventListener("click",T),f.addEventListener("click",J),JSON.parse(b).includes(y)&&C("Remove from my library"),null===b&&C("Add to my library")}catch(e){console.log(e)}}(t),document.addEventListener("keydown",O),c.moreDetail.addEventListener("click",M),c.body.style.overflow="hidden",c.scrollUpBtn.style.display="none"}function M(e){!function(e,t){if(e.target!==e.currentTarget)return;t()}(e,q)}function q(){c.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",O),c.moreDetail.removeEventListener("click",M),c.body.style.overflow="auto",c.selectStyled.textContent="Genre",c.selectStyled.style.color="#b7b7b7"}function O(e){"Escape"===e.key&&q()}function T(e){const t=+e.target.dataset.id;var r;r=t,c.trailerModal.classList.remove("is-hidden"),async function(e){try{const t=await(0,i.fetchTrailers)(e);if(t.length>0){const e=function(e){return viewportWidth<=767?`\n      <iframe width="250" height="160" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    `:`\n      <iframe width="600" height="300" src="https://www.youtube.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    `}(t[0].key);c.trailerModalContent.innerHTML=e}else x()}catch(e){console.error("Error fetching trailer:",e),x()}}(r),document.addEventListener("keydown",N),c.closeTrailerBtn.addEventListener("click",D)}function x(){trailerErrorImage.classList.remove("is-hidden"),c.trailerModalContent.innerHTML='\n    <div class="error-mode-content">\n      <div class="trailer-error-info">\n        <p>OOPS...</p>\n        <p>We are very sorry!</p>\n        <p>But we couldn\'t find the trailer.</p>\n      </div>\n  '}function N(e){"Escape"===e.key&&D()}function D(){c.trailerModal.classList.add("is-hidden"),c.trailerModalContent.innerHTML="",document.removeEventListener("keydown",N),c.closeModalBtn.removeEventListener("click",D)}function J(){q(),b=localStorage.getItem("films-id-array");try{if(null===b)return v.push(y),localStorage.setItem("films-id-array",JSON.stringify(v)),b=localStorage.getItem("films-id-array"),C("Remove from my library"),void S();let e=JSON.parse(b);if(!e.includes(y))return e.push(y),localStorage.setItem("films-id-array",JSON.stringify(e)),b=localStorage.getItem("films-id-array"),C("Remove from my library"),void S();if(e.includes(y)){const t=e.indexOf(y);e.splice(t,1),localStorage.setItem("films-id-array",JSON.stringify(e)),b=localStorage.getItem("films-id-array"),C("Add to my library"),S()}}catch(e){o.Notify.failure("Please, try one more time")}}function C(e){f.textContent=e}function I(e){p=e.target,p.hasAttribute("id")?(c.selectStyled.textContent=p.textContent,$(),function(e){if(""!==e.id&&c.body.classList.contains("light"))return void(c.selectStyled.style.color="#282828");""!==e.id&&(c.selectStyled.style.color="#ffffff")}(p),async function(e){d.innerHTML="";try{JSON.parse(b).forEach((async t=>{const r=await(0,a.fetchMovieDetails)(t);if(r.genres.includes(e)){const e=await(0,l.cardMarkup)(r.id);d.innerHTML+=e,k()}}))}catch(e){console.log(e)}}(p.textContent)):$()}function $(){"none"!==c.selectList.style.display?c.selectList.style.display="none":c.selectList.style.display="block"}u.addEventListener("click",(()=>{h+=1,g()})),n("cFYrD"),n("fsbGD");
//# sourceMappingURL=library.695a41fe.js.map
