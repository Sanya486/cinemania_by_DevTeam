!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o("jTnTT"),o("ldyZu"),o("qudGN"),o("dMHQ5"),o("6Zpxp"),o("jMR00"),o("dEJWt"),o("Folgn"),o("chpbE"),o("8FKnS");var l,i,a,c=o("bpxeT"),s=o("2TvXO"),d=o("h6c0i"),u=o("5T9lI"),f=o("dMHQ5"),m=o("ldyZu"),p={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex"),selectSection:document.querySelector(".genre-filter"),select:document.querySelector(".select"),selectList:document.querySelector(".select-options"),selectStyled:document.querySelector(".select-styled-content"),selectAll:document.querySelector(".select-styled")},y=document.querySelector(".library-film-list"),v=document.querySelector(".card-list-search-result"),h=document.querySelector("#js-loadmore"),b="films-id-array",g=document.querySelector(".reset-filter-button"),S=[],w=localStorage.getItem(b);p.closeModalBtn.addEventListener("click",N),window.addEventListener("load",k);var L=1;function k(){if(null===w||0===JSON.parse(w).length)E();else{var e=JSON.parse(w).slice(9*(L-1),9*L).map((function(e){return(0,u.cardMarkup)(e)}));Promise.all(e).then((function(e){var t=e.join("");v.innerHTML+=t,M(),q()})).catch((function(e){console.error("Error rendering film cards:",e)}))}p.select.addEventListener("click",j),g.addEventListener("click",(function(){document.location.reload()}))}function x(){if(L=1,null===(w=localStorage.getItem(b))||0===JSON.parse(w).length)E();else{var e=JSON.parse(w).map((function(e){return(0,u.cardMarkup)(e)})).slice(9*(L-1),9*L);Promise.all(e).then((function(e){var t=e.join("");v.innerHTML=t,M()})).catch((function(e){console.error("Error rendering film cards:",e)}))}p.select.addEventListener("click",j),g.addEventListener("click",(function(){document.location.reload()}))}function E(){d.Notify.info("OOPS... You don't have any movies at your library.");y.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>',p.selectSection.classList.add("hidden")}function M(){JSON.parse(w).length>9*L?h.style.display="block":h.style.display="none",q()}function q(){var e=document.querySelectorAll(".film-card"),t=!0,n=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.addEventListener("click",T)}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}}function T(e){var t;e.preventDefault(),l=+e.currentTarget.id,t=l,p.moreDetail.classList.remove("is-hidden"),function(e){I.apply(this,arguments)}(t),document.addEventListener("keydown",C),p.moreDetail.addEventListener("click",O),p.body.style.overflow="hidden",p.scrollUpBtn.style.display="none"}function O(e){!function(e,t){if(e.target!==e.currentTarget)return;t()}(e,N)}function N(){p.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",C),p.moreDetail.removeEventListener("click",O),p.body.style.overflow="auto",p.selectStyled.textContent="Genre",p.selectStyled.style.color="#b7b7b7"}function C(e){"Escape"===e.key&&N()}function I(){return(I=e(c)(e(s).mark((function t(n){var r,o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.fetchMovieDetails)(n);case 3:r=e.sent,o='<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/w400/'.concat(r.smallPoster,'" class="poster-img" loading="lazy" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">').concat(r.title,'</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li><p class="film-info-params-vote"><span class="film-info-params-vote-number">').concat(r.voteAverage.toFixed(1),'</span> / <span class="film-info-params-vote-number">').concat(r.voteCount,'</span></p>\n                </li>\n                <li><p class="popularity">').concat(r.popularity.toFixed(1),'</p></li>\n                <li><p class="genre">').concat(r.genres,'</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>About</p>\n            <p>').concat(r.overview,'</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller" data-id="').concat(n,'">Watch trailer</button>\n            <button class="add-to-my-library-btn btn modal" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>'),p.wrap.innerHTML=o,l=document.querySelector("#btn-watch-treiller"),i=document.querySelector("#btn-add-to-my-library"),l.addEventListener("click",J),i.addEventListener("click",R),F(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function J(e){var t,n=+e.target.dataset.id;t=n,p.trailerModal.classList.remove("is-hidden"),function(e){H.apply(this,arguments)}(t),document.addEventListener("keydown",B),p.closeTrailerBtn.addEventListener("click",P)}function H(){return(H=e(c)(e(s).mark((function t(n){var r,o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.fetchTrailers)(n);case 3:(r=e.sent).length>0?(o=r[0].key,l=D(o),p.trailerModalContent.innerHTML=l):A(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching trailer:",e.t0),A();case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function D(e){return viewportWidth<=767?'\n      <iframe width="250" height="160" src="https://www.youtube.com/embed/'.concat(e,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    '):'\n      <iframe width="600" height="300" src="https://www.youtube.com/embed/'.concat(e,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n    ')}function A(){trailerErrorImage.classList.remove("is-hidden"),p.trailerModalContent.innerHTML='\n    <div class="error-mode-content">\n      <div class="trailer-error-info">\n        <p>OOPS...</p>\n        <p>We are very sorry!</p>\n        <p>But we couldn\'t find the trailer.</p>\n      </div>\n  '}function B(e){"Escape"===e.key&&P()}function P(){p.trailerModal.classList.add("is-hidden"),p.trailerModalContent.innerHTML="",document.removeEventListener("keydown",B),p.closeModalBtn.removeEventListener("click",P)}function F(){JSON.parse(w).includes(l)&&_("Remove from my library"),null===w&&_("Add to my library")}function R(){N(),w=localStorage.getItem(b);try{if(null===w)return S.push(l),localStorage.setItem(b,JSON.stringify(S)),w=localStorage.getItem(b),_("Remove from my library"),void x();var e=JSON.parse(w);if(!e.includes(l))return e.push(l),localStorage.setItem(b,JSON.stringify(e)),w=localStorage.getItem(b),_("Remove from my library"),void x();if(e.includes(l)){var t=e.indexOf(l);e.splice(t,1),localStorage.setItem(b,JSON.stringify(e)),w=localStorage.getItem(b),_("Add to my library"),x()}}catch(e){d.Notify.failure("Please, try one more time")}}function _(e){i.textContent=e}function j(e){(a=e.target).hasAttribute("id")?(p.selectStyled.textContent=a.textContent,U(),function(e){if(""!==e.id&&p.body.classList.contains("light"))return void(p.selectStyled.style.color="#282828");""!==e.id&&(p.selectStyled.style.color="#ffffff")}(a),function(e){W.apply(this,arguments)}(a.textContent)):U()}function W(){return W=e(c)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v.innerHTML="","";try{JSON.parse(w).forEach(function(){var t=e(c)(e(s).mark((function t(r){var o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.fetchMovieDetails)(r);case 2:if(!(o=e.sent).genres.includes(n)){e.next=9;break}return e.next=6,(0,u.cardMarkup)(o.id);case 6:l=e.sent,v.innerHTML+=l,q();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(e){console.log(e)}case 3:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}function U(){"none"!==p.selectList.style.display?p.selectList.style.display="none":p.selectList.style.display="block"}h.addEventListener("click",(function(){L+=1,k()})),o("6y5lF"),o("gOyL5")}();
//# sourceMappingURL=library.8ffc1911.js.map
