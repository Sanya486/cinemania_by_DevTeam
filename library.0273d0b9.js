!function(){function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},l=r.parcelRequired7c6;null==l&&((l=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,r.call(l.exports,l,l.exports),l.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,r){n[e]=r},r.parcelRequired7c6=l),l("jTnTT"),l("ldyZu"),l("qudGN"),l("dMHQ5"),l("6Zpxp"),l("jMR00"),l("dEJWt"),l("Folgn"),l("chpbE"),l("8FKnS");var a,i,o=l("bpxeT"),c=l("2TvXO"),s=l("h6c0i"),d=l("5T9lI"),p=l("dMHQ5"),u=l("ldyZu"),m={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex")},f=document.querySelector(".library-film-list"),y=document.querySelector(".card-list-search-result"),v=document.querySelector("#js-loadmore"),h="films-id-array",g=[],b=localStorage.getItem(h);m.closeModalBtn.addEventListener("click",k),window.addEventListener("load",w);var x=1;function w(){if(null===b||0===JSON.parse(b).length){f.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>'}else{var e=JSON.parse(b).slice(9*(x-1),9*x).map((function(e){return(0,d.cardMarkup)(e)}));Promise.all(e).then((function(e){var r=e.join("");y.innerHTML+=r,JSON.parse(b).length>9*x?v.style.display="block":v.style.display="none",function(){var e=document.querySelectorAll(".film-card"),r=!0,t=!1,n=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){l.value.addEventListener("click",S)}}catch(e){t=!0,n=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}()})).catch((function(e){console.error("Error rendering film cards:",e)}))}}function S(e){var r;e.preventDefault(),a=+e.currentTarget.id,r=a,m.moreDetail.classList.remove("is-hidden"),function(e){M.apply(this,arguments)}(r),document.addEventListener("keydown",L),m.body.style.overflow="hidden",m.scrollUpBtn.style.display="none"}function k(){m.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",L),m.body.style.overflow="auto"}function L(e){"Escape"===e.key&&k()}function M(){return(M=e(o)(e(c).mark((function r(t){var n,l,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.fetchMovieDetails)(t);case 3:n=e.sent,l='<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/original/'.concat(n.smallPoster,'" class="poster-img" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">').concat(n.title,'</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li><p class="film-info-params-vote"><span class="film-info-params-vote-number">').concat(n.voteAverage.toFixed(1),'</span> / <span class="film-info-params-vote-number">').concat(n.voteCount,'</span></p>\n                </li>\n                <li><p class="popularity">').concat(n.popularity.toFixed(1),'</p></li>\n                <li><p class="genre">').concat(n.genres,'</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>About</p>\n            <p>').concat(n.overview,'</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller" data-id="').concat(t,'">Watch trailer</button>\n            <button class="add-to-my-library-btn btn modal" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>'),m.wrap.innerHTML=l,a=document.querySelector("#btn-watch-treiller"),i=document.querySelector("#btn-add-to-my-library"),a.addEventListener("click",T),i.addEventListener("click",I),B(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),r,null,[[0,13]])})))).apply(this,arguments)}function T(e){var r,t=+e.target.dataset.id;r=t,m.trailerModal.classList.remove("is-hidden"),function(e){E.apply(this,arguments)}(r),document.addEventListener("keydown",q),m.closeTrailerBtn.addEventListener("click",N)}function E(){return(E=e(o)(e(c).mark((function r(t){var n,l,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.fetchTrailers)(t);case 3:(n=e.sent).length>0?(l=n[0].key,a=O(l),m.trailerModalContent.innerHTML='<div class="trailer-modal-content">'.concat(a,"</div>")):('\n    <div class="trailer-error-info">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn\'t find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 320px)">\n      <source srcset="../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 768px)">\n      <source srcset="../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x" \n              media="(min-width: 769px)">\n      <img src="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png" alt="Traier is not found">\n    </picture>\n    </div>\n  ',m.trailerModal.innerHTML='<div class="trailer-modal-content">'.concat('\n    <div class="trailer-error-info">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn\'t find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 320px)">\n      <source srcset="../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 768px)">\n      <source srcset="../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x" \n              media="(min-width: 769px)">\n      <img src="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png" alt="Traier is not found">\n    </picture>\n    </div>\n  ',"</div>")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching trailer:",e.t0);case 10:case"end":return e.stop()}}),r,null,[[0,7]])})))).apply(this,arguments)}function O(e){return'\n    <iframe width="560" height="315" src="https://www.youtube.com/embed/'.concat(e,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n  ')}function q(e){"Escape"===e.key&&N()}function N(){m.trailerModal.classList.add("is-hidden"),m.trailerModalContent.innerHTML="",document.removeEventListener("keydown",q),m.closeModalBtn.removeEventListener("click",N)}function B(){JSON.parse(b).includes(a)&&J("Remove from my library"),null===b&&J("Add to my library")}function I(){k(),b=localStorage.getItem(h);try{if(null===b)return g.push(a),localStorage.setItem(h,JSON.stringify(g)),b=localStorage.getItem(h),J("Remove from my library"),void w();var e=JSON.parse(b);if(!e.includes(a))return e.push(a),localStorage.setItem(h,JSON.stringify(e)),b=localStorage.getItem(h),J("Remove from my library"),void w();if(e.includes(a)){var r=e.indexOf(a);e.splice(r,1),localStorage.setItem(h,JSON.stringify(e)),b=localStorage.getItem(h),J("Add to my library"),w()}}catch(e){s.Notify.failure("Please, try one more time")}}function J(e){i.textContent=e}v.addEventListener("click",(function(){x+=1,w()})),l("6MRYZ"),l("6y5lF"),l("gOyL5")}();
//# sourceMappingURL=library.0273d0b9.js.map
