!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},t.parcelRequired7c6=o),o("jTnTT"),o("ldyZu"),o("qudGN"),o("dMHQ5"),o("6Zpxp"),o("kBXCh"),o("dEJWt"),o("Folgn"),o("dm1tF"),o("hJBVG");var l,i,a,c=o("bpxeT"),s=o("2TvXO"),d=o("h6c0i"),u=o("hTrCt"),y=o("dMHQ5"),f=o("ldyZu"),m=o("4iqIG"),p=o("aKh8I"),v=(p=o("aKh8I"),{heroContainer:document.querySelector(".home-hero > .container"),trailerModalBackDrop:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerAvaible:document.querySelector(".trailer-avaible"),trailerErrorContent:document.querySelector(".trailer-error-mode-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex"),selectSection:document.querySelector(".genre-filter"),select:document.querySelector(".select"),selectList:document.querySelector(".select-options"),selectStyled:document.querySelector(".select-styled-content"),selectAll:document.querySelector(".select-styled"),sectionLibrary:document.querySelector(".library-film-list"),libraryCardList:document.querySelector(".card-list-search-result"),loadMoreBtn:document.querySelector("#js-loadmore"),resetBtn:document.querySelector(".reset-filter-button")}),h="films-id-array",S=[],b=localStorage.getItem(h),L=1;function k(){if(null===b||0===JSON.parse(b).length)E();else{var e=JSON.parse(b).slice(9*(L-1),9*L).map((function(e){return(0,u.cardMarkup)(e)}));Promise.all(e).then((function(e){var t=e.join("");v.libraryCardList.innerHTML+=t,q(),M()})).catch((function(e){console.error("Error rendering film cards:",e)}))}v.select.addEventListener("click",j),v.resetBtn.addEventListener("click",(function(){document.location.reload()}))}function g(){if(L=1,null===(b=localStorage.getItem(h))||0===JSON.parse(b).length)E();else{var e=JSON.parse(b).map((function(e){return(0,u.cardMarkup)(e)})).slice(9*(L-1),9*L);Promise.all(e).then((function(e){var t=e.join("");v.libraryCardList.innerHTML=t,q()})).catch((function(e){console.error("Error rendering film cards:",e)}))}v.select.addEventListener("click",j),v.resetBtn.addEventListener("click",(function(){document.location.reload()}))}function E(){d.Notify.info("OOPS... You don't have any movies at your library.");v.sectionLibrary.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>',v.selectSection.classList.add("hidden")}function q(){JSON.parse(b).length>9*L?v.loadMoreBtn.style.display="block":v.loadMoreBtn.style.display="none",M()}function M(){var e=document.querySelectorAll(".film-card"),t=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.addEventListener("click",w)}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}}function w(e){var t;e.preventDefault(),l=+e.currentTarget.id,t=l,v.moreDetail.classList.remove("is-hidden"),function(e){T.apply(this,arguments)}(t),document.addEventListener("keydown",B),v.moreDetail.addEventListener("click",(function(e){return(0,p.closeOnBacdrop)(e,x)})),v.body.style.overflow="hidden",v.scrollUpBtn.style.display="none"}function x(){v.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",B),v.moreDetail.removeEventListener("click",p.closeOnBacdrop),v.body.style.overflow="auto"}function B(e){"Escape"===e.key&&x()}function T(){return(T=e(c)(e(s).mark((function t(r){var n,o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.markupMoreDetails)(r);case 3:n=e.sent,v.wrap.innerHTML=n,o=document.querySelector("#btn-watch-treiller"),i=document.querySelector("#btn-add-to-my-library"),o.addEventListener("click",O),i.addEventListener("click",H),J(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function O(e){var t,r=+e.target.dataset.id;t=r,v.trailerModalBackDrop.classList.remove("is-hidden"),function(e){N.apply(this,arguments)}(t),document.addEventListener("keydown",D),v.closeTrailerBtn.addEventListener("click",I),v.trailerModalBackDrop.addEventListener("click",C)}function C(e){closeOnBackdropClick(e,I)}function N(){return(N=e(c)(e(s).mark((function t(r){var n,o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.fetchTrailers)(r);case 3:(n=e.sent).length>0?(o=n[0].key,l=(0,p.showTrailer)(o),v.trailerAvaible.innerHTML=l):v.trailerErrorContent.classList.remove("hidden"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching trailer:",e.t0),v.trailerErrorContent.classList.remove("hidden");case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function D(e){"Escape"===e.key&&I()}function I(){v.trailerModalBackDrop.classList.add("is-hidden"),v.trailerErrorContent.classList.add("hidden"),v.trailerAvaible.innerHTML="",document.removeEventListener("keydown",D),v.closeModalBtn.removeEventListener("click",I),v.trailerModalBackDrop.removeEventListener("click",C)}function J(){JSON.parse(b).includes(l)&&A("Remove from my library"),null===b&&A("Add to my library")}function H(){x(),b=localStorage.getItem(h);try{if(null===b)return S.push(l),localStorage.setItem(h,JSON.stringify(S)),b=localStorage.getItem(h),A("Remove from my library"),void g();var e=JSON.parse(b);if(!e.includes(l))return e.push(l),localStorage.setItem(h,JSON.stringify(e)),b=localStorage.getItem(h),A("Remove from my library"),void g();if(e.includes(l)){var t=e.indexOf(l);e.splice(t,1),localStorage.setItem(h,JSON.stringify(e)),b=localStorage.getItem(h),A("Add to my library"),g()}}catch(e){d.Notify.failure("Please, try one more time")}}function A(e){i.textContent=e}function j(e){(a=e.target).hasAttribute("id")?(v.selectStyled.textContent=a.textContent,_(),function(e){if(""!==e.id&&v.body.classList.contains("light"))return void(v.selectStyled.style.color="#282828");""!==e.id&&(v.selectStyled.style.color="#ffffff")}(a),function(e){P.apply(this,arguments)}(a.textContent)):_()}function P(){return P=e(c)(e(s).mark((function t(r){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v.libraryCardList.innerHTML="";try{JSON.parse(b).forEach(function(){var t=e(c)(e(s).mark((function t(n){var o,l;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.fetchMovieDetails)(n);case 2:if(!(o=e.sent).genres.includes(r)){e.next=9;break}return e.next=6,(0,u.cardMarkup)(o.id);case 6:l=e.sent,v.libraryCardList.innerHTML+=l,M();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(e){console.log(e)}case 2:case"end":return t.stop()}}),t)}))),P.apply(this,arguments)}function _(){"none"!==v.selectList.style.display?v.selectList.style.display="none":v.selectList.style.display="block"}v.closeModalBtn.addEventListener("click",x),window.addEventListener("load",k),v.loadMoreBtn.addEventListener("click",(function(){L+=1,k()})),o("jYjTq"),o("9sPra")}();
//# sourceMappingURL=library.c3885b91.js.map
