{"mappings":"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","sources":["src/js/index.js","src/js/other/weekly-trends.js","src/js/other/home-upcoming.js"],"sourcesContent":["// =============Fetches-JS =============\n\nimport \"./fetches/fetch-upcoming\";\nimport \"./fetches/fetch-movie-details\";\nimport \"./fetches/fetch-movie-genre\";\nimport \"./fetches/fetch-trailer\";\nimport \"./fetches/fetch-search\";\nimport \"./fetches/fetch-trendings\";\n\n// =============Modals-JS =============\n\nimport \"./modals/modal-team\"\nimport \"./modals/slider-modal-team\"\n\n\n// =============Other-JS =============\n\n\nimport \"./other/rate-markup\"\nimport \"./other/card-markup\"\nimport \"./other/switch-theme-btn\"\n\nimport \"./other/hero-markup\"\n\nimport \"./other/mob-menu\"\nimport \"./other/slide-menu\"\nimport \"./other/current-page-track\"\nimport \"./other/scroll-up\"\nimport \"./other/weekly-trends.js\"\nimport \"./other/home-upcoming\"\n// import \"./other/test-card-markup\"\n\n\n\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchTrendingMovies } from '../fetches/fetch-trendings';\nimport { fetchTrailers } from '../fetches/fetch-trailer';\nimport { fetchMovieDetails } from '../fetches/fetch-movie-details';\nimport { cardMarkup } from './card-markup';\n\nconst refs = {\n  heroContainer: document.querySelector('.home-hero > .container'),\n  trailerModal: document.querySelector('.trailer-modal-backdrop'),\n  trailerModalContent: document.querySelector('.trailer-modal-content'),\n  moreDetail: document.querySelector('.modal-film-info'),\n  wrap: document.querySelector('.flex'),\n  closeModalBtn: document.querySelector('.modal-film-info .close-modal'),\n  closeTrailerBtn: document.querySelector('.close-trailer-btn'),\n  homeTrendsList: document.querySelector('.home-trends-list'),\n  body: document.querySelector('body'),\n  scrollUpBtn: document.querySelector('#back-to-top'),\n};\n\nlet arr = [];\nlet cardId;\nlet btnatlibrary;\nlet localArr = localStorage.getItem('films-id-array');\n\nwindow.addEventListener('load', onLoad);\nrefs.closeModalBtn.addEventListener('click', closeMoreDetails);\n\nasync function onLoad() {\n  try {\n    const movies = await fetchTrendingMovies();\n    if (movies.length === 0) {\n      Notify.failure(\"We are sorry but we don't have any upcoming films\");\n      return;\n    }\n    const randomFilmsArr = onChooseRandomFilms(movies);\n    onRenderMarkup(randomFilmsArr);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function onRenderMarkup(randomFilmsArr) {\n  try {\n    const movieCards = await Promise.all(\n      randomFilmsArr.map(async movie => {\n        const card = await cardMarkup(movie.id);\n        return card;\n      })\n    );\n    refs.homeTrendsList.innerHTML = movieCards.join('');\n    onAddEventListener();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction onChooseRandomFilms(movies) {\n  const randomFirstFilm = Math.floor(Math.random() * 5);\n  const randomFilmsArr = movies.slice(randomFirstFilm, randomFirstFilm + 3);\n  return randomFilmsArr;\n}\n\nfunction onAddEventListener() {\n  let cardsArrRef = document.querySelectorAll('.film-card');\n  for (const card of cardsArrRef) {\n    card.addEventListener('click', onClick);\n  }\n}\n\nfunction onClick(e) {\n  e.preventDefault();\n  cardId = +e.currentTarget.id;\n  openModalDetails(cardId);\n  refs.body.style.overflow = 'hidden';\n  refs.scrollUpBtn.style.display = 'none';\n}\nfunction openModalDetails(cardId) {\n  refs.moreDetail.classList.remove('is-hidden');\n  markupMoreDetails(cardId);\n  document.addEventListener('keydown', onEscapeMoreDetails);\n  refs.moreDetail.addEventListener('click', closeOnBacdropMoreDetails)\n}\n\nfunction closeOnBacdropMoreDetails (e) {\n  closeOnBackdropClick(e, closeMoreDetails)\n}\n\n\nfunction closeOnBackdropClick (e, callback){\n  if (e.target !== e.currentTarget){\n    return \n  }\n  else {\n    callback();\n  }\n}\n\nfunction closeMoreDetails() {\n  refs.moreDetail.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscapeMoreDetails);\n  refs.moreDetail.removeEventListener('click', closeOnBacdropMoreDetails)\n  refs.body.style.overflow = 'auto';\n}\n\nfunction onEscapeMoreDetails(e) {\n  if (e.key === 'Escape') {\n    closeMoreDetails();\n  }\n}\n\nasync function markupMoreDetails(currentId) {\n  try {\n    const movieDetails = await fetchMovieDetails(currentId);\n    const markup = `<div class=\"poster\"> \n          <img src=\"https://image.tmdb.org/t/p/original/${\n            movieDetails.smallPoster\n          }\" class=\"poster-img\" alt=\"the poster of the movie you have chosen\"/>\n        </div><div>\n          <h3 class=\"movie-title\">${\n            movieDetails.title\n          }</h3><div class=\"movie-info\">\n            <div class=\"info\">\n              <ul class=\"film-info-list\">\n                <li><p class=\"film-info-item-text\">Vote / Votes</p></li>\n                <li><p class=\"film-info-item-text\">Popularity</p></li>\n                <li><p class=\"film-info-item-text\">Genre</p></li>\n              </ul>\n            </div><div class=\"params\">\n              <ul class=\"film=info-params-list\">\n                <li><p class=\"film-info-params-vote\"><span class=\"film-info-params-vote-number\">${movieDetails.voteAverage.toFixed(\n                  1\n                )}</span> / <span class=\"film-info-params-vote-number\">${\n      movieDetails.voteCount\n    }</span></p>\n                </li>\n                <li><p class=\"popularity\">${movieDetails.popularity.toFixed(\n                  1\n                )}</p></li>\n                <li><p class=\"genre\">${movieDetails.genres}</p></li>  \n              </ul>  \n            </div>\n          </div><div class=\"about\">\n            <p>About</p>\n            <p>${movieDetails.overview}</p>\n          </div><div class=\"btn-list\">\n            <button class=\"main-accent-sml-btn btn modal\" id=\"btn-watch-treiller\" data-id=\"${currentId}\">Watch trailer</button>\n            <button class=\"add-to-my-library-btn btn modal\" id=\"btn-add-to-my-library\">Add to my library</button>\n          </div>\n        </div>`;\n    refs.wrap.innerHTML = markup;\n\n    const btnatreiller = document.querySelector('#btn-watch-treiller');\n    btnatlibrary = document.querySelector('#btn-add-to-my-library');\n\n    btnatreiller.addEventListener('click', OnWatchTrailerBtn);\n    btnatlibrary.addEventListener('click', action);\n\n    onCheckLocalStorage();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction OnWatchTrailerBtn(event) {\n  const cardId = +event.target.dataset.id;\n  openModal(cardId);\n}\n\nfunction openModal(cardId) {\n  refs.trailerModal.classList.remove('is-hidden');\n  watchTrailer(cardId);\n\n  document.addEventListener('keydown', onEscape);\n  refs.closeTrailerBtn.addEventListener('click', closeModal);\n}\n\nasync function watchTrailer(cardId) {\n  try {\n    const trailers = await fetchTrailers(cardId);\n\n    if (trailers.length > 0) {\n      const trailerKey = trailers[0].key;\n\n      const trailerContent = showTrailer(trailerKey);\n      refs.trailerModalContent.innerHTML = `<div class=\"trailer-modal-content\">${trailerContent}</div>`;\n    } else {\n      const errorContent = showError();\n      refs.trailerModal.innerHTML = `<div class=\"trailer-modal-content\">${errorContent}</div>`;\n    }\n  } catch (error) {\n    console.error('Error fetching trailer:', error);\n  }\n}\nfunction showTrailer(trailerKey) {\n  if (viewportWidth <= 767) {\n    return `\n      <iframe width=\"250\" height=\"160\" src=\"https://www.youtube.com/embed/${trailerKey}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n    `;\n  } else {\n    return `\n      <iframe width=\"600\" height=\"300\" src=\"https://www.youtube.com/embed/${trailerKey}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n    `;\n  }\n}\n\nfunction showError() {\n  return `\n    <div class=\"trailer-error-info\">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn't find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset=\"../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x\" \n              media=\"(max-width: 320px)\">\n      <source srcset=\"../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x\" \n              media=\"(max-width: 768px)\">\n      <source srcset=\"../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x\" \n              media=\"(min-width: 769px)\">\n      <img src=\"../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png\" alt=\"Traier is not found\">\n    </picture>\n    </div>\n  `;\n}\n\nfunction onEscape(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  refs.trailerModal.classList.add('is-hidden');\n\n  refs.trailerModalContent.innerHTML = '';\n  document.removeEventListener('keydown', onEscape);\n  refs.closeModalBtn.removeEventListener('click', closeModal);\n  refs.moreDetail.removeEventListener('click', closeOnBacdropMoreDetails)\n}\n\nfunction onCheckLocalStorage() {\n  if (JSON.parse(localArr).includes(cardId)) {\n    toggleBtnStyles('Remove from my library');\n  }\n  if (localArr === null) {\n    toggleBtnStyles('Add to my library');\n  }\n}\n\nfunction action() {\n  localArr = localStorage.getItem('films-id-array');\n  try {\n    if (localArr === null) {\n      arr.push(cardId);\n      localStorage.setItem('films-id-array', JSON.stringify(arr));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Remove from my library');\n      return;\n    }\n    let parseLocalStorage = JSON.parse(localArr);\n\n    if (!parseLocalStorage.includes(cardId)) {\n      parseLocalStorage.push(cardId);\n      localStorage.setItem('films-id-array', JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Remove from my library');\n      return;\n    }\n    if (parseLocalStorage.includes(cardId)) {\n      const idx = parseLocalStorage.indexOf(cardId);\n      parseLocalStorage.splice(idx, 1);\n      localStorage.setItem('films-id-array', JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Add to my library');\n    }\n  } catch (error) {\n    Notify.failure('Please, try one more time');\n  }\n}\n\nfunction toggleBtnStyles(text) {\n  btnatlibrary.textContent = text;\n}\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchMovieDetails } from '../fetches/fetch-movie-details';\nimport { fetchUpcoming } from '../fetches/fetch-upcoming';\nexport { homeUpcoming };\n\nconst refs = {\n  filmBlock: document.querySelector('.home-upcoming-film-wrap-js'),\n};\nlet filmInfo;\nlet arr = [];\nlet btnRef;\nlet localArr = localStorage.getItem('films-id-array');\n\nwindow.addEventListener('load', onLoadPage);\nlet portrait = window.matchMedia('(orientation: portrait)');\nportrait.addEventListener('change', onCheckOrientation);\n\nasync function onLoadPage() {\n  try {\n    const films = await fetchUpcoming();\n    if (films.length === 0) {\n      Notify.failure(\"We are sorry but we don't have any upcoming films\");\n      return;\n    }\n    onChooseCurrentFilm(films);\n  } catch (error) {\n    onError(error);\n  }\n}\n\nasync function onChooseCurrentFilm(films) {\n  const randomFilm = Math.floor(Math.random() * 20);\n  const filmId = films.slice(randomFilm, randomFilm + 1)[0].id;\n  try {\n    filmInfo = await fetchMovieDetails(filmId);\n    onGetDataAndCallRender(filmInfo);\n    onAddBtnListener();\n    onCheckLocalStorage();\n  } catch (error) {\n    onError(error);\n  }\n}\n\nfunction onRenderMarkup(film, posterType, vote) {\n  const markup = `<div class=\"home-upcoming-film-poster-wrap\"><div class=\"home-upcoming-film-poster-overlay\"></div><img class=\"home-upcoming-film-poster\" src=\"${posterType}\"></div><div class=\"home-upcoming-film-info-wrap\">\n          <h3 class=\"home-upcoming-film-title text\">${film.title}</h3>\n            <ul class=\"home-upcoming-film-info-list\">\n              <li class=\"home-upcoming-film-info-item\">\n                <div class=\"home-upcoming-film-info-item-wrap\">\n                  <p class=\"home-upcoming-film-info-item-text text\">Release date</p>\n                </div>\n                <div class=\"home-upcoming-film-info-item-wrap\"><p class=\"home-upcoming-film-info-date text\">${film.date\n                  .split('-')\n                  .reverse()\n                  .join('.')}</p></div>\n              </li>\n              <li class=\"home-upcoming-film-info-item\">\n                <div class=\"home-upcoming-film-info-item-wrap\">\n                  <p class=\"home-upcoming-film-info-item-text text\">Vote / Votes</p>\n                </div>\n                <div class=\"home-upcoming-film-info-item-wrap\"><p class=\"home-upcoming-film-info-rating text light-theme-color\"><span class=\"home-upcoming-film-info-rating-number text\">${vote}</span>/<span class=\"home-upcoming-film-info-rating-number text\">${\n    film.voteCount\n  }</span></p></div></li>\n              <li class=\"home-upcoming-film-info-item\">\n                <div class=\"home-upcoming-film-info-item-wrap\">\n                  <p class=\"home-upcoming-film-info-item-text text\">Popularity</p>\n                </div>\n                <div class=\"home-upcoming-film-info-item-wrap\"><p class=\"home-upcoming-film-info-popularity text light-theme-color\">${film.popularity.toFixed(\n                  1\n                )}</p></div>\n              </li>\n              <li class=\"home-upcoming-film-info-item\">\n                <div class=\"home-upcoming-film-info-item-wrap\">\n                  <p class=\"home-upcoming-film-info-item-text text\">Genre</p>\n                </div>\n                <div class=\"home-upcoming-film-info-item-wrap\"><p class=\"home-upcoming-film-info-genres text light-theme-color\">${\n                  film.genres\n                }</p></div>\n              </li>\n            </ul>\n          <p class=\"home-upcoming-film-about text\">About</p>\n          <p class=\"home-upcoming-film-about-text text\">Reclusive author Loretta Sage writes about exotic places in her popular adventure novels that feature a handsome cover model named Alan. While on tour promoting her new book with Alan, Loretta gets kidnapped by an eccentric billionaire who hopes she can lead him to an ancient city's lost treasure from her latest story. Determined to prove he can be a hero in real life and not just on the pages of her books, Alan sets off to rescue her.</p>\n          <button class=\"main-accent-sml-btn btn home-upcoming-btn-js\" type=\"button\">Add to my library</button>\n        </div>`;\n  refs.filmBlock.innerHTML = markup;\n}\n\nfunction onGetDataAndCallRender(film) {\n  const voteAv = onCheckRating(film);\n  const currentPoster = onCheckViewport();\n  const poster = onCheckCurrentPoster(currentPoster, film);\n  onRenderMarkup(film, poster, voteAv);\n}\n\nfunction onCheckRating(film) {\n  if (film.voteAverage === 0) {\n    const voteAv = '-';\n    film.voteCount = '-';\n    return voteAv;\n  }\n  const voteAv = film.voteAverage.toFixed(1);\n  return voteAv;\n}\n\nfunction onCheckViewport() {\n  const TABLET = window.matchMedia('(min-width: 768px)');\n  if (TABLET.matches) {\n    return 'poster';\n  }\n  return 'smallPoster';\n}\n\nfunction onCheckOrientation(e) {\n  let poster;\n  if (e.matches) {\n    poster = `https://image.tmdb.org/t/p/original/${filmInfo.smallPoster}`;\n  } else {\n    poster = `https://image.tmdb.org/t/p/original/${filmInfo.poster}`;\n  }\n  try {\n    const voteAv = onCheckRating(filmInfo);\n    onRenderMarkup(filmInfo, poster, voteAv);\n    onAddBtnListener();\n    onCheckLocalStorage();\n  } catch (error) {\n    onError(error);\n  }\n}\n\nfunction onCheckCurrentPoster(currentPoster, film) {\n  if (currentPoster === 'poster') {\n    return `https://image.tmdb.org/t/p/original/${film.poster}`;\n  }\n  return `https://image.tmdb.org/t/p/original/${film.smallPoster}`;\n}\n\nfunction onAddBtnListener() {\n  btnRef = document.querySelector('.home-upcoming-btn-js');\n  btnRef.addEventListener('click', onAddIdFilmInLocaleStorage);\n}\n\nfunction onCheckLocalStorage() {\n  if (JSON.parse(localArr).includes(filmInfo.id)) {\n    toggleBtnStyles('Remove from my library');\n  }\n  if (localArr === null) {\n    toggleBtnStyles('Add to my library');\n  }\n}\n\nfunction onAddIdFilmInLocaleStorage() {\n  localArr = localStorage.getItem('films-id-array');\n  try {\n    if (localArr === null) {\n      arr.push(filmInfo.id);\n      localStorage.setItem('films-id-array', JSON.stringify(arr));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Remove from my library');\n      return;\n    }\n    let parseLocalStorage = JSON.parse(localArr);\n\n    if (!parseLocalStorage.includes(filmInfo.id)) {\n      parseLocalStorage.push(filmInfo.id);\n      localStorage.setItem('films-id-array', JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Remove from my library');\n      return;\n    }\n    if (parseLocalStorage.includes(filmInfo.id)) {\n      const idx = parseLocalStorage.indexOf(filmInfo.id);\n      parseLocalStorage.splice(idx, 1);\n      localStorage.setItem('films-id-array', JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem('films-id-array');\n      toggleBtnStyles('Add to my library');\n    }\n  } catch (error) {\n    Notify.failure('Please, try one more time');\n  }\n}\n\nfunction toggleBtnStyles(text) {\n  btnRef.textContent = text;\n  btnRef.classList.toggle('remove-js');\n  btnRef.classList.toggle('main-accent-sml-btn');\n}\n\nfunction onError(error) {\n  console.log(error.message);\n}\n"],"names":["parcelRequire","$iQIUW","$222e92640d810830$var$refs","heroContainer","document","querySelector","trailerModal","trailerModalContent","moreDetail","wrap","closeModalBtn","closeTrailerBtn","homeTrendsList","body","scrollUpBtn","$222e92640d810830$var$cardId","$222e92640d810830$var$btnatlibrary","$222e92640d810830$var$arr","$222e92640d810830$var$localArr","localStorage","getItem","$222e92640d810830$var$onClick","e","cardId1","preventDefault","currentTarget","id","classList","remove","async","currentId","movieDetails","$e9oz9","fetchMovieDetails","markup","smallPoster","title","voteAverage","toFixed","voteCount","popularity","genres","overview","innerHTML","btnatreiller","addEventListener","$222e92640d810830$var$OnWatchTrailerBtn","$222e92640d810830$var$action","JSON","parse","includes","$222e92640d810830$var$toggleBtnStyles","error","console","log","$222e92640d810830$var$markupMoreDetails","$222e92640d810830$var$onEscapeMoreDetails","$222e92640d810830$var$closeOnBacdropMoreDetails","style","overflow","display","callback","target","$222e92640d810830$var$closeOnBackdropClick","$222e92640d810830$var$closeMoreDetails","add","removeEventListener","key","event","cardId2","dataset","cardId3","cardId4","trailers","$aDtKJ","fetchTrailers","length","trailerContent","trailerKey","viewportWidth","$222e92640d810830$var$showTrailer","errorContent","$222e92640d810830$var$watchTrailer","$222e92640d810830$var$onEscape","$222e92640d810830$var$closeModal","push","setItem","stringify","parseLocalStorage","idx","indexOf","splice","Notify","failure","text","textContent","window","movies","$fgOKF","fetchTrendingMovies","randomFilmsArr","randomFirstFilm","Math","floor","random","slice","$222e92640d810830$var$onChooseRandomFilms","movieCards","Promise","all","map","movie","$8nneY","cardMarkup","join","cardsArrRef","querySelectorAll","card","$222e92640d810830$var$onAddEventListener","message","$222e92640d810830$var$onRenderMarkup","$0829f5b0ab742ec9$var$refs","filmBlock","$0829f5b0ab742ec9$var$filmInfo","$0829f5b0ab742ec9$var$btnRef","$0829f5b0ab742ec9$var$arr","$0829f5b0ab742ec9$var$localArr","$0829f5b0ab742ec9$var$onRenderMarkup","film","posterType","vote","date","split","reverse","$0829f5b0ab742ec9$var$onCheckRating","voteAv","$0829f5b0ab742ec9$var$onAddBtnListener","$0829f5b0ab742ec9$var$onAddIdFilmInLocaleStorage","$0829f5b0ab742ec9$var$onCheckLocalStorage","$0829f5b0ab742ec9$var$toggleBtnStyles","toggle","$0829f5b0ab742ec9$var$onError","films","$kQlMt","fetchUpcoming","randomFilm","filmId","poster","currentPoster","$0829f5b0ab742ec9$var$onCheckCurrentPoster","matchMedia","matches","$0829f5b0ab742ec9$var$onGetDataAndCallRender","$0829f5b0ab742ec9$var$onChooseCurrentFilm"],"version":3,"file":"index.0df38a27.js.map"}