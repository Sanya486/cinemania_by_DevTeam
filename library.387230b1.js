!function(){function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=r.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,r){n[e]=r},r.parcelRequired7c6=a),a("jTnTT"),a("ldyZu"),a("qudGN"),a("dMHQ5"),a("6Zpxp"),a("jMR00"),a("dEJWt"),a("Folgn"),a("chpbE"),a("8FKnS");var l,i,o=a("bpxeT"),c=a("2TvXO"),s=a("h6c0i"),d=a("5T9lI"),p=a("dMHQ5"),u=a("ldyZu"),m={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),moreDetail:document.querySelector(".modal-film-info"),closeModalBtn:document.querySelector(".modal-film-info .close-modal"),closeTrailerBtn:document.querySelector(".close-trailer-btn"),homeTrendsList:document.querySelector(".home-trends-list"),body:document.querySelector("body"),scrollUpBtn:document.querySelector("#back-to-top"),wrap:document.querySelector(".flex")},f=document.querySelector(".card-list-search-result"),y=document.querySelector(".library-film-list"),v=[],h=localStorage.getItem("films-id-array");function b(){if(null===h||0===JSON.parse(h).length){y.innerHTML='<div class="container-library container">\n      <p class="library-empty__mistake">OOPS... <br> We are very sorry! <br> You don\'t have any movies at your library.</p>\n      <button class="main-accent-sml-btn btn library" onclick="window.location.href=\'catalog.html\'">Search movie</button>\n    </div>'}else{var e=JSON.parse(h).map((function(e){return function(e){return g.apply(this,arguments)}(e)}));Promise.all(e).then((function(e){var r=e.join("");f.innerHTML=r,function(){var e=document.querySelectorAll(".film-card"),r=!0,t=!1,n=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){a.value.addEventListener("click",x)}}catch(e){t=!0,n=e}finally{try{r||null==l.return||l.return()}finally{if(t)throw n}}}()})).catch((function(e){console.error("Error rendering film cards:",e)}))}}function g(){return(g=e(o)(e(c).mark((function r(t){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.cardMarkup)(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function x(e){var r;e.preventDefault(),l=+e.currentTarget.id,r=l,m.moreDetail.classList.remove("is-hidden"),function(e){k.apply(this,arguments)}(r),document.addEventListener("keydown",S),m.body.style.overflow="hidden",m.scrollUpBtn.style.display="none"}function w(){m.moreDetail.classList.add("is-hidden"),document.removeEventListener("keydown",S),m.body.style.overflow="auto"}function S(e){"Escape"===e.key&&w()}function k(){return(k=e(o)(e(c).mark((function r(t){var n,a,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.fetchMovieDetails)(t);case 3:n=e.sent,a='<div class="poster"> \n          <img src="https://image.tmdb.org/t/p/original/'.concat(n.smallPoster,'" class="poster-img" alt="the poster of the movie you have chosen"/>\n        </div><div>\n          <h3 class="movie-title">').concat(n.title,'</h3><div class="movie-info">\n            <div class="info">\n              <ul class="film-info-list">\n                <li><p class="film-info-item-text">Vote / Votes</p></li>\n                <li><p class="film-info-item-text">Popularity</p></li>\n                <li><p class="film-info-item-text">Genre</p></li>\n              </ul>\n            </div><div class="params">\n              <ul class="film=info-params-list">\n                <li><p class="film-info-params-vote"><span class="film-info-params-vote-number">').concat(n.voteAverage.toFixed(1),'</span> / <span class="film-info-params-vote-number">').concat(n.voteCount,'</span></p>\n                </li>\n                <li><p class="popularity">').concat(n.popularity.toFixed(1),'</p></li>\n                <li><p class="genre">').concat(n.genres,'</p></li>  \n              </ul>  \n            </div>\n          </div><div class="about">\n            <p>About</p>\n            <p>').concat(n.overview,'</p>\n          </div><div class="btn-list">\n            <button class="main-accent-sml-btn btn modal" id="btn-watch-treiller" data-id="').concat(t,'">Watch trailer</button>\n            <button class="add-to-my-library-btn btn modal" id="btn-add-to-my-library">Add to my library</button>\n          </div>\n        </div>'),m.wrap.innerHTML=a,l=document.querySelector("#btn-watch-treiller"),i=document.querySelector("#btn-add-to-my-library"),l.addEventListener("click",L),i.addEventListener("click",N),q(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),r,null,[[0,13]])})))).apply(this,arguments)}function L(e){var r,t=+e.target.dataset.id;r=t,m.trailerModal.classList.remove("is-hidden"),function(e){M.apply(this,arguments)}(r),document.addEventListener("keydown",E),m.closeTrailerBtn.addEventListener("click",O)}function M(){return(M=e(o)(e(c).mark((function r(t){var n,a,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.fetchTrailers)(t);case 3:(n=e.sent).length>0?(a=n[0].key,l=T(a),m.trailerModalContent.innerHTML='<div class="trailer-modal-content">'.concat(l,"</div>")):('\n    <div class="trailer-error-info">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn\'t find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 320px)">\n      <source srcset="../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 768px)">\n      <source srcset="../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x" \n              media="(min-width: 769px)">\n      <img src="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png" alt="Traier is not found">\n    </picture>\n    </div>\n  ',m.trailerModal.innerHTML='<div class="trailer-modal-content">'.concat('\n    <div class="trailer-error-info">\n      <p>OOPS...</p>\n      <p>We are very sorry!</p>\n      <p>But we couldn\'t find the trailer.</p>\n    </div>\n    <picture>\n      <source srcset="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/mobile/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 320px)">\n      <source srcset="../../images/trailer-placeholder/tablet/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/tablet/trailer-placeholder-2x.png, 2x" \n              media="(max-width: 768px)">\n      <source srcset="../../images/trailer-placeholder/desktop/trailer-placeholder-1x.png, 1x, \n                    ../../images/trailer-placeholder/desktop/trailer-placeholder-2x.png, 2x" \n              media="(min-width: 769px)">\n      <img src="../../images/trailer-placeholder/mobile/trailer-placeholder-1x.png" alt="Traier is not found">\n    </picture>\n    </div>\n  ',"</div>")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching trailer:",e.t0);case 10:case"end":return e.stop()}}),r,null,[[0,7]])})))).apply(this,arguments)}function T(e){return'\n    <iframe width="560" height="315" src="https://www.youtube.com/embed/'.concat(e,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n  ')}function E(e){"Escape"===e.key&&O()}function O(){m.trailerModal.classList.add("is-hidden"),m.trailerModalContent.innerHTML="",document.removeEventListener("keydown",E),m.closeModalBtn.removeEventListener("click",O)}function q(){JSON.parse(h).includes(l)&&B("Remove from my library"),null===h&&B("Add to my library")}function N(){w(),h=localStorage.getItem("films-id-array");try{if(null===h)return v.push(l),localStorage.setItem("films-id-array",JSON.stringify(v)),h=localStorage.getItem("films-id-array"),B("Remove from my library"),void b();var e=JSON.parse(h);if(!e.includes(l))return e.push(l),localStorage.setItem("films-id-array",JSON.stringify(e)),h=localStorage.getItem("films-id-array"),B("Remove from my library"),void b();if(e.includes(l)){var r=e.indexOf(l);e.splice(r,1),localStorage.setItem("films-id-array",JSON.stringify(e)),h=localStorage.getItem("films-id-array"),B("Add to my library"),b()}}catch(e){s.Notify.failure("Please, try one more time")}}function B(e){i.textContent=e}m.closeModalBtn.addEventListener("click",w),window.addEventListener("load",b),a("6MRYZ"),a("6y5lF"),a("gOyL5")}();
//# sourceMappingURL=library.387230b1.js.map
