var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var o=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,o.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequired7c6=o),o.register("aPC56",(function(e,t){var r=o("e9oz9"),n=o("1IMnW"),i=o("aDtKJ"),a=o("8fHRS"),l=o("5ZOIY"),c=o("hRoFA");const d={heroContainer:document.querySelector(".home-hero > .container"),trailerModalBackDrop:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerAvaible:document.querySelector(".trailer-avaible"),trailerErrorContent:document.querySelector(".trailer-error-mode-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),poster:document.querySelector(".poster-img"),title:document.querySelector(".movie-title"),vote:document.querySelector(".vote"),votes:document.querySelector(".votes"),popularity:document.querySelector(".popularity"),genre:document.querySelector(".genre"),description:document.querySelector(".about p"),closeModalBtn:document.querySelector(".close-trailer-btn"),wrap:document.querySelector(".flex"),body:document.querySelector("body")};let s,m,u,y=[],f=localStorage.getItem("films-id-array");document.body.clientWidth;function v(e){const t=+e.target.dataset.id;var r;r=t,d.trailerModalBackDrop.classList.remove("is-hidden"),d.body.style.overflow="hidden",async function(e){try{const t=await(0,i.fetchTrailers)(e);if(t.length>0){const e=t[0].key,r=(0,c.showTrailer)(e);d.trailerModalContent.innerHTML=r}else d.trailerErrorContent.classList.remove("hidden")}catch(e){console.error("Error fetching trailer:",e),d.trailerErrorContent.classList.remove("hidden")}}(r),document.addEventListener("keydown",E),d.closeModalBtn.addEventListener("click",w),d.trailerModalBackDrop.addEventListener("click",p)}function g(e){var t;s=+e.target.dataset.id,t=s,d.moreDetail.classList.remove("is-hidden"),d.body.style.overflow="hidden",async function(e){try{const t=await(0,l.markupMoreDetails)(e);d.wrap.innerHTML=t;const r=document.querySelector("#btn-watch-treiller");m=document.querySelector("#btn-add-to-my-library"),r.addEventListener("click",v),m.addEventListener("click",k),JSON.parse(f).includes(s)&&q("Remove from my library"),null===f&&q("Add to my library")}catch(e){console.log(e)}}(t),document.addEventListener("keydown",L),d.moreDetail.addEventListener("click",h);document.querySelector(".modal-film-info .close-modal").addEventListener("click",S)}function h(e){b(e,S)}function p(e){b(e,w)}function b(e,t){e.target===e.currentTarget&&t()}function S(){d.moreDetail.classList.add("is-hidden"),d.body.style.overflow="auto",document.removeEventListener("keydown",L),d.moreDetail.removeEventListener("click",h)}function w(){d.trailerModalBackDrop.classList.add("is-hidden"),d.body.style.overflow="auto",d.trailerAvaible.innerHTML="",document.removeEventListener("keydown",E),d.closeModalBtn.removeEventListener("click",w),d.trailerModalBackDrop.removeEventListener("click",p)}function L(e){"Escape"===e.key&&S()}function E(e){"Escape"===e.key&&w()}function k(){f=localStorage.getItem("films-id-array");try{if(null===f)return y.push(s),localStorage.setItem("films-id-array",JSON.stringify(y)),f=localStorage.getItem("films-id-array"),void q("Remove from my library");let e=JSON.parse(f);if(!e.includes(s))return e.push(s),localStorage.setItem("films-id-array",JSON.stringify(e)),f=localStorage.getItem("films-id-array"),void q("Remove from my library");if(e.includes(s)){const t=e.indexOf(s);e.splice(t,1),localStorage.setItem("films-id-array",JSON.stringify(e)),f=localStorage.getItem("films-id-array"),q("Add to my library")}}catch(e){Notify.failure("Please, try one more time")}}function q(e){m.textContent=e}window.addEventListener("load",(async function(){try{const e=(await(0,a.fetchTrendingMovies)()).map((e=>e.id));await async function(e){try{const t=e[Math.floor(Math.random()*e.length)];u=await(0,r.fetchMovieDetails)(t),function(e){const{title:t,overview:r,smallPoster:o,poster:i,voteAverage:a,id:l}=e,c=Math.round(a),s=(0,n.rateArray)(c).map((e=>`<li class="rating-item">\n               <img class="rating-icon" src="${e}" alt="">\n               </li>`)).join(""),m=`<div class="home-hero-api-movie">\n      <div class="home-hero-api-movie-con"><h2 class="home-hero-api-movie-name">${t}</h2>\n    <div class="home-hero-api-movie-rating">\n      <ul class="film-rating-hero">\n        ${s}\n      </ul>\n    </div>\n    <p class="home-hero-api-movie-description">\n      ${r}\n    </p>\n    <div class="home-hero-api-movie-btns">\n    <button class="main-accent-sml-btn btn" id='btn-watch-trailer' data-id="${l}">Watch trailer</button>\n    <button class="rm-light-bcg-btn btn btn-call-film-info" data-id="${l}">More details </button>\n    </div>\n  </div>\n  <div class="home-hero-api-movie-bg">\n    <img loading="lazy"\n      src="https://image.tmdb.org/t/p/original/${o}"\n      srcset="\n        https://image.tmdb.org/t/p/original/${o}  320w,\n        https://image.tmdb.org/t/p/original/${i}  768w,\n        https://image.tmdb.org/t/p/original/${i} 1280w\n      "\n      sizes="(max-width: 320px) 320px,\n          (max-width: 768px) 380px,\n          1280px"\n      alt="${t}"\n    />\n    </div>\n    </div>`;d.heroContainer.insertAdjacentHTML("beforeend",m),function(){const e=document.querySelector(".preloader");e&&e.remove()}()}(u)}catch(e){console.log(e.message)}}(e);document.getElementById("btn-watch-trailer").addEventListener("click",v);document.querySelector(".btn-call-film-info").addEventListener("click",g)}catch(e){console.log(e.message)}}))}));
//# sourceMappingURL=index.55fb8d85.js.map
