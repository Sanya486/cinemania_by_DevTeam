!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired7c6=o),o.register("gQsUO",(function(t,r){var n,i,a=o("bpxeT"),c=o("2TvXO"),l=o("ldyZu"),s=o("keua2"),d=o("dMHQ5"),u=o("kBXCh"),m=o("4iqIG"),p=o("aKh8I"),f={heroContainer:document.querySelector(".home-hero > .container"),trailerModal:document.querySelector(".trailer-modal-backdrop"),trailerModalContent:document.querySelector(".trailer-modal-content"),trailerErrorImage:document.querySelector(".trailer-placeholder-default"),moreDetail:document.querySelector(".modal-film-info"),poster:document.querySelector(".poster-img"),title:document.querySelector(".movie-title"),vote:document.querySelector(".vote"),votes:document.querySelector(".votes"),popularity:document.querySelector(".popularity"),genre:document.querySelector(".genre"),description:document.querySelector(".about p"),closeModalBtn:document.querySelector(".close-trailer-btn"),wrap:document.querySelector(".flex"),body:document.querySelector("body")},v=[],y=localStorage.getItem("films-id-array");document.body.clientWidth;function h(){return(h=e(a)(e(c).mark((function t(){var r,n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.fetchTrendingMovies)();case 3:return r=e.sent,n=r.map((function(e){return e.id})),e.next=7,g(n);case 7:e.sent,document.getElementById("btn-watch-trailer").addEventListener("click",S),document.querySelector(".btn-call-film-info").addEventListener("click",k),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0.message);case 17:case"end":return e.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=e(a)(e(c).mark((function t(r){var n,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Math.floor(Math.random()*r.length),o=r[n],e.next=5,(0,l.fetchMovieDetails)(o);case 5:w(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function w(e){var t,r=e.title,n=e.overview,o=e.smallPoster,i=e.poster,a=e.voteAverage,c=e.id,l=Math.round(a),d=(0,s.rateArray)(l).map((function(e){return'<li class="rating-item">\n               <img class="rating-icon" src="'.concat(e,'" alt="">\n               </li>')})).join(""),u='<div class="home-hero-api-movie">\n      <div class="home-hero-api-movie-con"><h2 class="home-hero-api-movie-name">'.concat(r,'</h2>\n    <div class="home-hero-api-movie-rating">\n      <ul class="film-rating-hero">\n        ').concat(d,'\n      </ul>\n    </div>\n    <p class="home-hero-api-movie-description">\n      ').concat(n,'\n    </p>\n    <div class="home-hero-api-movie-btns">\n    <button class="main-accent-sml-btn btn" id=\'btn-watch-trailer\' data-id="').concat(c,'">Watch trailer</button>\n    <button class="rm-light-bcg-btn btn btn-call-film-info" data-id="').concat(c,'">More details </button>\n    </div>\n  </div>\n  <div class="home-hero-api-movie-bg">\n    <img loading="lazy"\n      src="https://image.tmdb.org/t/p/original/').concat(o,'"\n      srcset="\n        https://image.tmdb.org/t/p/original/').concat(o,"  320w,\n        https://image.tmdb.org/t/p/original/").concat(i,"  768w,\n        https://image.tmdb.org/t/p/original/").concat(i,' 1280w\n      "\n      sizes="(max-width: 320px) 320px,\n          (max-width: 768px) 380px,\n          1280px"\n      alt="').concat(r,'"\n    />\n    </div>\n    </div>');f.heroContainer.insertAdjacentHTML("beforeend",u),(t=document.querySelector(".preloader"))&&t.remove()}function S(e){var t,r=+e.target.dataset.id;t=r,f.trailerModal.classList.remove("is-hidden"),f.body.style.overflow="hidden",function(e){O.apply(this,arguments)}(t),document.addEventListener("keydown",I),f.closeModalBtn.addEventListener("click",q),f.trailerModal.addEventListener("click",L)}function k(e){var t;n=+e.target.dataset.id,t=n,f.moreDetail.classList.remove("is-hidden"),f.body.style.overflow="hidden",function(e){D.apply(this,arguments)}(t),document.addEventListener("keydown",T),f.moreDetail.addEventListener("click",x),document.querySelector(".modal-film-info .close-modal").addEventListener("click",E)}function x(e){M(e,E)}function L(e){M(e,q)}function M(e,t){e.target===e.currentTarget&&t()}function E(){f.moreDetail.classList.add("is-hidden"),f.body.style.overflow="auto",document.removeEventListener("keydown",T),f.moreDetail.removeEventListener("click",x)}function q(){f.trailerModal.classList.add("is-hidden"),f.body.style.overflow="auto",f.trailerModalContent.innerHTML="",document.removeEventListener("keydown",I),f.closeModalBtn.removeEventListener("click",q),f.trailerModal.removeEventListener("click",L)}function T(e){"Escape"===e.key&&E()}function I(e){"Escape"===e.key&&q()}function O(){return(O=e(a)(e(c).mark((function t(r){var n,o,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.fetchTrailers)(r);case 3:(n=e.sent).length>0?(o=n[0].key,i=(0,p.showTrailer)(o),f.trailerModalContent.innerHTML=i):C(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching trailer:",e.t0),C();case 11:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function C(){trailerErrorImage.classList.remove("is-hidden"),f.trailerModalContent.innerHTML='\n    <div class="error-mode-content">\n      <div class="trailer-error-info">\n        <p>OOPS...</p>\n        <p>We are very sorry!</p>\n        <p>But we couldn\'t find the trailer.</p>\n      </div>\n  '}function D(){return(D=e(a)(e(c).mark((function t(r){var n,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.markupMoreDetails)(r);case 3:n=e.sent,f.wrap.innerHTML=n,o=document.querySelector("#btn-watch-treiller"),i=document.querySelector("#btn-add-to-my-library"),o.addEventListener("click",S),i.addEventListener("click",B),N(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function N(){JSON.parse(y).includes(n)&&H("Remove from my library"),null===y&&H("Add to my library")}function B(){y=localStorage.getItem("films-id-array");try{if(null===y)return v.push(n),localStorage.setItem("films-id-array",JSON.stringify(v)),y=localStorage.getItem("films-id-array"),void H("Remove from my library");var e=JSON.parse(y);if(!e.includes(n))return e.push(n),localStorage.setItem("films-id-array",JSON.stringify(e)),y=localStorage.getItem("films-id-array"),void H("Remove from my library");if(e.includes(n)){var t=e.indexOf(n);e.splice(t,1),localStorage.setItem("films-id-array",JSON.stringify(e)),y=localStorage.getItem("films-id-array"),H("Add to my library")}}catch(e){Notify.failure("Please, try one more time")}}function H(e){i.textContent=e}window.addEventListener("load",(function(){return h.apply(this,arguments)}))}))}();
//# sourceMappingURL=index.02f6457e.js.map
