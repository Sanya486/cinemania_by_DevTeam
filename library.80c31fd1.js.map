{"mappings":"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","sources":["src/js/index-library.js","src/js/other/library-favorites-cards.js"],"sourcesContent":["// =============Fetches-JS =============\n\nimport \"./fetches/fetch-upcoming\";\nimport \"./fetches/fetch-movie-details\";\nimport \"./fetches/fetch-movie-genre\";\nimport \"./fetches/fetch-trailer\";\nimport \"./fetches/fetch-search\";\nimport \"./fetches/fetch-trendings\";\n\n// =============Modals-JS =============\n\nimport \"./modals/modal-team\"\nimport \"./modals/slider-modal-team\"\n\n// =============Other-JS =============\n\nimport \"./other/switch-theme-btn\"\nimport \"./other/mob-menu\"\nimport \"./other/library-favorites-cards\"\nimport \"./other/current-page-track\"\nimport \"./other/scroll-up\"\n\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { cardMarkup } from './card-markup';\nimport { fetchTrailers } from '../fetches/fetch-trailer';\nimport { fetchMovieDetails } from '../fetches/fetch-movie-details';\n\nconst refs = {\n  heroContainer: document.querySelector('.home-hero > .container'),\n  trailerModal: document.querySelector('.trailer-modal-backdrop'),\n  trailerModalContent: document.querySelector('.trailer-modal-content'),\n  trailerErrorImage: document.querySelector('.trailer-placeholder-default'),\n  moreDetail: document.querySelector('.modal-film-info'),\n  closeModalBtn: document.querySelector('.modal-film-info .close-modal'),\n  closeTrailerBtn: document.querySelector('.close-trailer-btn'),\n  homeTrendsList: document.querySelector('.home-trends-list'),\n  body: document.querySelector('body'),\n  scrollUpBtn: document.querySelector('#back-to-top'),\n  wrap: document.querySelector('.flex'),\n  selectSection: document.querySelector('.genre-filter'),\n  select: document.querySelector('.select'),\n  selectList: document.querySelector('.select-options'),\n  selectStyled: document.querySelector('.select-styled-content'),\n  selectAll: document.querySelector('.select-styled'),\n};\n\nconst sectionLibrary = document.querySelector('.library-film-list');\nconst libraryCardList = document.querySelector('.card-list-search-result');\nconst loadMoreBtn = document.querySelector('#js-loadmore');\nconst librariesKey = 'films-id-array';\nconst resetBtn = document.querySelector('.reset-filter-button');\n\n\n\nlet arr = [];\nlet cardId;\nlet btnatlibrary;\nlet localArr = localStorage.getItem(librariesKey);\nlet currentGenre;\n\nrefs.closeModalBtn.addEventListener('click', closeMoreDetails);\nwindow.addEventListener('load', renderCards);\n\n\nconst perPage = 9;\nlet page = 1;\n\nfunction showMoreCards() {\n  return JSON.parse(localArr).length > perPage * page;\n}\n\nloadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  renderCards();\n});\n\nfunction renderCards() {\n  if (localArr === null || JSON.parse(localArr).length === 0) {\n    onNotMarkup();\n  } else {\n    const renderPromises = JSON.parse(localArr)\n      .slice((page - 1) * perPage, page * perPage)\n      .map(id => cardMarkup(id));\n\n    Promise.all(renderPromises)\n      .then(filmCards => {\n        const filmCardsHTML = filmCards.join('');\n        libraryCardList.innerHTML += filmCardsHTML;\n        toggleLoadMore();\n        onAddEventListener();\n      })\n      .catch(error => {\n        console.error('Error rendering film cards:', error);\n      });\n  }\n  refs.select.addEventListener('click', onSelectGenre);\n  resetBtn.addEventListener('click', () => {\n    document.location.reload()\n  });\n}\n\nfunction updateMarkup() {\n  page = 1;\n  localArr = localStorage.getItem(librariesKey);\n  if (localArr === null || JSON.parse(localArr).length === 0) {\n    onNotMarkup();\n  } else {\n    const renderPromises = JSON.parse(localArr)\n      .map(id => cardMarkup(id))\n      .slice((page - 1) * perPage, page * perPage);\n\n    Promise.all(renderPromises)\n      .then(filmCards => {\n        const filmCardsHTML = filmCards.join('');\n        libraryCardList.innerHTML = filmCardsHTML;\n        toggleLoadMore();\n      })\n      .catch(error => {\n        console.error('Error rendering film cards:', error);\n      });\n  }\n  refs.select.addEventListener('click', onSelectGenre);\n  resetBtn.addEventListener('click', () => {\n    document.location.reload()\n  });\n}\n\nfunction onNotMarkup() {\n  Notify.info(`OOPS... You don't have any movies at your library.`);\n  const emptyLibrary = `<div class=\"container-library container\">\n      <p class=\"library-empty__mistake\">OOPS... <br> We are very sorry! <br> You don't have any movies at your library.</p>\n      <button class=\"main-accent-sml-btn btn library\" onclick=\"window.location.href='catalog.html'\">Search movie</button>\n    </div>`;\n  sectionLibrary.innerHTML = emptyLibrary;\n  refs.selectSection.classList.add('hidden');\n}\n\nfunction toggleLoadMore() {\n  if (showMoreCards()) {\n    loadMoreBtn.style.display = 'block';\n  } else {\n    loadMoreBtn.style.display = 'none';\n  }\n  onAddEventListener();\n}\n\nfunction onAddEventListener() {\n  let cardsArrRef = document.querySelectorAll('.film-card');\n  for (const card of cardsArrRef) {\n    card.addEventListener('click', onClick);\n  }\n}\n\nfunction onClick(e) {\n  e.preventDefault();\n  cardId = +e.currentTarget.id;\n  openModalDetails(cardId);\n  refs.body.style.overflow = 'hidden';\n  refs.scrollUpBtn.style.display = 'none';\n}\n\nfunction openModalDetails(cardId) {\n  refs.moreDetail.classList.remove('is-hidden');\n  markupMoreDetails(cardId);\n  document.addEventListener('keydown', onEscapeMoreDetails);\n  refs.moreDetail.addEventListener('click', closeOnBacdropMoreDetails);\n}\n\nfunction closeOnBacdropMoreDetails(e) {\n  closeOnBackdropClick(e, closeMoreDetails);\n}\n\nfunction closeOnBackdropClick(e, callback) {\n  if (e.target !== e.currentTarget) {\n    return;\n  } else {\n    callback();\n  }\n}\n\nfunction closeMoreDetails() {\n  refs.moreDetail.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscapeMoreDetails);\n  refs.moreDetail.removeEventListener('click', closeOnBacdropMoreDetails);\n  refs.body.style.overflow = 'auto';\n  refs.selectStyled.textContent = 'Genre';\n  refs.selectStyled.style.color = '#b7b7b7';\n}\n\nfunction onEscapeMoreDetails(e) {\n  if (e.key === 'Escape') {\n    closeMoreDetails();\n  }\n}\n\nasync function markupMoreDetails(currentId) {\n  try {\n    const movieDetails = await fetchMovieDetails(currentId);\n    const markup = `<div class=\"poster\"> \n          <img src=\"https://image.tmdb.org/t/p/w400/${\n            movieDetails.smallPoster\n          }\" class=\"poster-img\" loading=\"lazy\" alt=\"the poster of the movie you have chosen\"/>\n        </div><div>\n          <h3 class=\"movie-title\">${\n            movieDetails.title\n          }</h3><div class=\"movie-info\">\n            <div class=\"info\">\n              <ul class=\"film-info-list\">\n                <li><p class=\"film-info-item-text\">Vote / Votes</p></li>\n                <li><p class=\"film-info-item-text\">Popularity</p></li>\n                <li><p class=\"film-info-item-text\">Genre</p></li>\n              </ul>\n            </div><div class=\"params\">\n              <ul class=\"film=info-params-list\">\n                <li><p class=\"film-info-params-vote\"><span class=\"film-info-params-vote-number\">${movieDetails.voteAverage.toFixed(\n                  1\n                )}</span> / <span class=\"film-info-params-vote-number\">${\n      movieDetails.voteCount\n    }</span></p>\n                </li>\n                <li><p class=\"popularity\">${movieDetails.popularity.toFixed(\n                  1\n                )}</p></li>\n                <li><p class=\"genre\">${movieDetails.genres}</p></li>  \n              </ul>  \n            </div>\n          </div><div class=\"about\">\n            <p>About</p>\n            <p>${movieDetails.overview}</p>\n          </div><div class=\"btn-list\">\n            <button class=\"main-accent-sml-btn btn modal\" id=\"btn-watch-treiller\" data-id=\"${currentId}\">Watch trailer</button>\n            <button class=\"add-to-my-library-btn btn modal\" id=\"btn-add-to-my-library\">Add to my library</button>\n          </div>\n        </div>`;\n    refs.wrap.innerHTML = markup;\n\n    const btnatreiller = document.querySelector('#btn-watch-treiller');\n    btnatlibrary = document.querySelector('#btn-add-to-my-library');\n\n    btnatreiller.addEventListener('click', OnWatchTrailerBtn);\n    btnatlibrary.addEventListener('click', action);\n\n    onCheckLocalStorage();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction OnWatchTrailerBtn(event) {\n  const cardId = +event.target.dataset.id;\n  openModal(cardId);\n}\n\nfunction openModal(cardId) {\n  refs.trailerModal.classList.remove('is-hidden');\n  watchTrailer(cardId);\n\n  document.addEventListener('keydown', onEscape);\n  refs.closeTrailerBtn.addEventListener('click', closeModal);\n}\n\nasync function watchTrailer(cardId) {\n  try {\n    const trailers = await fetchTrailers(cardId);\n\n    if (trailers.length > 0) {\n      const trailerKey = trailers[0].key;\n\n      const trailerContent = showTrailer(trailerKey);\n      refs.trailerModalContent.innerHTML = trailerContent;\n    } else {\n      showErrorModal();\n    }\n  } catch (error) {\n    console.error('Error fetching trailer:', error);\n    showErrorModal();\n  }\n}\n\nfunction showTrailer(trailerKey) {\n  if (viewportWidth <= 767) {\n    return `\n      <iframe width=\"250\" height=\"160\" src=\"https://www.youtube.com/embed/${trailerKey}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n    `;\n  } else {\n    return `\n      <iframe width=\"600\" height=\"300\" src=\"https://www.youtube.com/embed/${trailerKey}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n    `;\n  }\n}\n\nfunction showErrorModal() {\n  const errorContent = `\n    <div class=\"error-mode-content\">\n      <div class=\"trailer-error-info\">\n        <p>OOPS...</p>\n        <p>We are very sorry!</p>\n        <p>But we couldn't find the trailer.</p>\n      </div>\n  `;\n  trailerErrorImage.classList.remove('is-hidden');\n  refs.trailerModalContent.innerHTML = errorContent;\n}\n\nfunction onEscape(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  refs.trailerModal.classList.add('is-hidden');\n\n  refs.trailerModalContent.innerHTML = '';\n  document.removeEventListener('keydown', onEscape);\n  refs.closeModalBtn.removeEventListener('click', closeModal);\n}\n\nfunction onCheckLocalStorage() {\n  if (JSON.parse(localArr).includes(cardId)) {\n    toggleBtnStyles('Remove from my library');\n  }\n  if (localArr === null) {\n    toggleBtnStyles('Add to my library');\n  }\n}\n\nfunction action() {\n  closeMoreDetails();\n  localArr = localStorage.getItem(librariesKey);\n  try {\n    if (localArr === null) {\n      arr.push(cardId);\n      localStorage.setItem(librariesKey, JSON.stringify(arr));\n      localArr = localStorage.getItem(librariesKey);\n      toggleBtnStyles('Remove from my library');\n      updateMarkup();\n      return;\n    }\n    let parseLocalStorage = JSON.parse(localArr);\n\n    if (!parseLocalStorage.includes(cardId)) {\n      parseLocalStorage.push(cardId);\n      localStorage.setItem(librariesKey, JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem(librariesKey);\n      toggleBtnStyles('Remove from my library');\n      updateMarkup();\n      return;\n    }\n    if (parseLocalStorage.includes(cardId)) {\n      const idx = parseLocalStorage.indexOf(cardId);\n      parseLocalStorage.splice(idx, 1);\n      localStorage.setItem(librariesKey, JSON.stringify(parseLocalStorage));\n      localArr = localStorage.getItem(librariesKey);\n      toggleBtnStyles('Add to my library');\n      updateMarkup();\n    }\n  } catch (error) {\n    Notify.failure('Please, try one more time');\n  }\n}\n\nfunction toggleBtnStyles(text) {\n  btnatlibrary.textContent = text;\n}\n\nfunction onSelectGenre(e) {\n  currentGenre = e.target;\n  if (!currentGenre.hasAttribute('id')) {\n    onToggleList();\n    return;\n  }\n  refs.selectStyled.textContent = currentGenre.textContent;\n  onToggleList();\n  onToggleGenreColor(currentGenre);\n  checkFilmsList(currentGenre.textContent);\n}\n\nasync function checkFilmsList(currentGenre) {\n  libraryCardList.innerHTML = '';\n  let currentFilms = ``;\n  try {\n    JSON.parse(localArr).forEach(async id => {\n      const data = await fetchMovieDetails(id);\n      if (data.genres.includes(currentGenre)) {\n        const card = await cardMarkup(data.id);\n        libraryCardList.innerHTML += card;\n        onAddEventListener();\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction onToggleGenreColor(currentGenre) {\n  if (currentGenre.id !== '' && refs.body.classList.contains('light')) {\n    refs.selectStyled.style.color = '#282828';\n    return;\n  }\n  if (currentGenre.id !== '') {\n    refs.selectStyled.style.color = '#ffffff';\n  }\n}\n\nfunction onToggleList() {\n  if (refs.selectList.style.display === 'none') {\n    refs.selectList.style.display = 'block';\n    return;\n  }\n  refs.selectList.style.display = 'none';\n}\n"],"names":["parcelRequire","$iQIUW","$edc98fd29b69c236$var$refs","heroContainer","document","querySelector","trailerModal","trailerModalContent","trailerErrorImage","moreDetail","closeModalBtn","closeTrailerBtn","homeTrendsList","body","scrollUpBtn","wrap","selectSection","select","selectList","selectStyled","selectAll","$edc98fd29b69c236$var$sectionLibrary","$edc98fd29b69c236$var$libraryCardList","$edc98fd29b69c236$var$loadMoreBtn","$edc98fd29b69c236$var$resetBtn","$edc98fd29b69c236$var$cardId","$edc98fd29b69c236$var$btnatlibrary","$edc98fd29b69c236$var$currentGenre","$edc98fd29b69c236$var$arr","$edc98fd29b69c236$var$localArr","localStorage","getItem","addEventListener","$edc98fd29b69c236$var$closeMoreDetails","window","$edc98fd29b69c236$var$renderCards","$edc98fd29b69c236$var$page","JSON","parse","length","$edc98fd29b69c236$var$onNotMarkup","renderPromises","slice","map","id","$8nneY","cardMarkup","Promise","all","then","filmCards","filmCardsHTML","join","innerHTML","$edc98fd29b69c236$var$toggleLoadMore","$edc98fd29b69c236$var$onAddEventListener","catch","error","console","$edc98fd29b69c236$var$onSelectGenre","location","reload","$edc98fd29b69c236$var$updateMarkup","Notify","info","classList","add","style","display","cardsArrRef","querySelectorAll","card","$edc98fd29b69c236$var$onClick","e","cardId1","preventDefault","currentTarget","remove","async","currentId","movieDetails","$e9oz9","fetchMovieDetails","markup","smallPoster","title","voteAverage","toFixed","voteCount","popularity","genres","overview","btnatreiller","$edc98fd29b69c236$var$OnWatchTrailerBtn","$edc98fd29b69c236$var$action","includes","$edc98fd29b69c236$var$toggleBtnStyles","log","$edc98fd29b69c236$var$markupMoreDetails","$edc98fd29b69c236$var$onEscapeMoreDetails","$edc98fd29b69c236$var$closeOnBacdropMoreDetails","overflow","callback","target","$edc98fd29b69c236$var$closeOnBackdropClick","removeEventListener","textContent","color","key","event","cardId2","dataset","cardId3","cardId4","trailers","$aDtKJ","fetchTrailers","trailerContent","trailerKey","viewportWidth","$edc98fd29b69c236$var$showTrailer","$edc98fd29b69c236$var$showErrorModal","$edc98fd29b69c236$var$watchTrailer","$edc98fd29b69c236$var$onEscape","$edc98fd29b69c236$var$closeModal","push","setItem","stringify","parseLocalStorage","idx","indexOf","splice","failure","text","hasAttribute","$edc98fd29b69c236$var$onToggleList","currentGenre2","contains","$edc98fd29b69c236$var$onToggleGenreColor","currentGenre1","forEach","data","$edc98fd29b69c236$var$checkFilmsList"],"version":3,"file":"library.80c31fd1.js.map"}